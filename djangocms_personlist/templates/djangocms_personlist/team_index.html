{% extends "layouts/sidebar_left.html" %}
{% load cms_tags sekizai_tags thumbnail cmspersonlist %}

{% block sidebar %}
    {% include "djangocms_personlist/team_filter.html" with filter_tag='team' %}
{% endblock %}

{% block content %}
    {% addtoblock "css" %}
        <link rel="stylesheet" href="{{ STATIC_URL }}css/masonry.css">
    {% endaddtoblock %}

    {% addtoblock "js" %}
        <script src="{{ STATIC_URL }}js/imagesloaded.pkgd.min.js"></script>
        <script src="{{ STATIC_URL }}js/masonry.pkgd.min.js"></script>
    {% endaddtoblock %}

    <h1>Unsere Teammitglieder</h1>
    <div id="masonry-loader">
        <i class="fa fa-spinner fa-spin fa-5x"></i>
    </div>
    <div id="masonry-container">
        {% for person in object_list %}
        <div class="masonry-item one-third{% for team in person.teams.all %} team-{{ team.pk }}{% endfor %}">
            <div class="masonry-item-image">
                <a href="{% persondetail_url pk=person.pk %}">
                    <img src="
                    {% if person.image %}
                        {{ person.image|thumbnail_url:'masonry' }}
                    {% else %}
                        {{ person.get_image_fallback|thumbnail_url:'masonry' }}
                    {% endif %}" alt="{{ person.name }}">
                    <div class="masonry-item-title">{{ person.name }}</div>
                </a>
            </div>

            <div class="masonry-item-description">
                {% if person.teams.all.count > 0 %}
                    Team{% if person.teams.all.count > 1 %}s{% endif %}:
                    {% for team in person.teams.all %}
                        {{ team.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}<br />{% endif %}
                Position: {{ person.position }}
            </div>
        </div>
    {% endfor %}
    </div>
    <div id="masonry-no-content">
        <i class="fa fa-meh-o fa-5x fa-fw"></i> <span>Keine Inhalte gefunden!</span>
    </div>
{% endblock %}